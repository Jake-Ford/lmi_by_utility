color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
baseGroups=c("Percent", "Count"),
#options = layersControlOptions(collapsed = FALSE)
)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
baseGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
hideGroup("Percent")
acs_vars <- load_variables(2019, "acs5")
View(acs_vars)
nm_blocks <- get_acs(
geography="tract",
state="NM",
variables=c("snap_hh" = "B22001_002",
"medicaid_under19" = "C27007_004"),
year=2019,
geometry=TRUE)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
hideGroup("Percent")
temp_util <- hifld_df %>%
filter(STATE == "NM")
st_crs(temp_util)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addPolygons(temp_util,
dashArray="3",
color="black",
fillOpacity=0) %>%
hideGroup("Percent")
st_crs(temp_util)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
map <- nm_df %>%
leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addPolygons(temp_util,
dashArray="3",
color="black",
fillOpacity=0)
map <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
data = nm_df
group="Count",
map <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
data = nm_df,
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100))
map
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
temp_util <- st_transform(temp_util, st_crs(nm_df))
map <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
data = nm_df,
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
data=nm_df,
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addPolygons(temp_util,
dashArray="3",
color="black",
fillOpacity=0)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
temp_util <- st_transform(temp_util, st_crs(nm_df))
map <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
data = nm_df,
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
data=nm_df,
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addPolygons(temp_util,
dashArray="3",
color="black",
fillOpacity=0)
leaflet(hifld)
leaflet(hifld_df) %>%
addPolygons()
leaflet() %>%
addPolygons(hifld_df)
table(hifld_df$STATE)
temp_util <- hifld_df %>%
filter(STATE== "NM")
leaflet() %>%
addPolygons(temp_util)
temp_util <- hifld_df %>%
filter(STATE== "NM")
temp_util <- st_as_sf(temp_util)
leaflet() %>%
addPolygons(temp_util)
leaflet() %>%
addPolygons(nm_df)
nm_df <- add_geo %>%
filter(State_Name == "New Mexico")
pal <- colorNumeric(
palette = "Reds",
# reverse=TRUE,
domain = nm_df$AMI_80)
pal2 <- colorNumeric(
palette = "Purples",
# reverse=TRUE,
domain = nm_df$AMI_80_Pct)
temp_util <- st_transform(temp_util, st_crs(nm_df))
map <- leaflet() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(
data = nm_df,
group="Count",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal(AMI_80),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"HHs at 80% AMI: ", nm_df$AMI_100)) %>%
addLegend("bottomleft",
group="Count",
pal = pal,
values = nm_df$AMI_80,
title="Number of HHs at 80% AMI") %>%
addPolygons(
data=nm_df,
group="Percent",
stroke=FALSE,
smoothFactor=0.2,
fillOpacity=0.7,
color=~pal2(AMI_80_Pct),
popup=paste("Tract: ", nm_df$geoid, "<br>",
"Percent of HHs at 80% AMI: ", nm_df$AMI_80_Pct)) %>%
addLegend("bottomleft",
group="Percent",
pal = pal2,
values = nm_df$AMI_80_Pct,
title="Percent of HHs at 80% AMI") %>%
addLayersControl(
overlayGroups=c("Percent", "Count"),
options = layersControlOptions(collapsed = FALSE))
# ) %>%
#
#
# addPolygons(temp_util,
#             dashArray="3",
#             color="black",
#             fillOpacity=0)
map %>%
hideGroup("Percent")
temp_util <- hifld_df %>%
filter(STATE== "NM")
temp_util <- st_as_sf(temp_util)
temp_util <- st_transform(temp_util, st_crs(nm_df))
leaflet() %>%
addPolygons(nm_df)
state_list <- c("IL", "NM", "MA", "NY", "NJ", "MN")
hifld_df <- st_read("utility_zones/HIFLD/Electric_Retail_Service_Territories (1)/Electric_Retail_Service_Territories.shp") %>%
filter(STATE %in% state_list)
temp_util <- hifld_df %>%
filter(STATE== "NM")
temp_util <- st_as_sf(temp_util)
temp_util <- st_transform(temp_util, st_crs(nm_df))
st_crs(temp_util)
st_crs(nm_df)
leaflet() %>%
addPolylines(temp_util)
View(temp_util)
leaflet() %>%
addPolygons(temp_util)
